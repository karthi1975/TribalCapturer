[phases.setup]
nixPkgs = ["python311", "postgresql", "bash", "gcc", "stdenv.cc.cc", "nodejs-18_x"]
nixLibs = ["stdenv.cc.cc"]

[phases.install]
cmds = [
  "python -m venv /opt/venv",
  ". /opt/venv/bin/activate && pip install -r business/TriageIQ/TribalCapturer/backend/requirements.txt",
  "cd business/TriageIQ/TribalCapturer/frontend && npm ci"
]

[phases.build]
cmds = [
  "cd business/TriageIQ/TribalCapturer/frontend && npm run build"
]

[start]
cmd = "bash business/TriageIQ/TribalCapturer/start.sh"
